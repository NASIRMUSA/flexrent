<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleaning Service Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(20px); opacity: 0; }
        }
        .animate-slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }
        .animate-slide-out {
            animation: slideOut 0.3s ease-out forwards;
        }
        .input-error {
            border-color: #ef4444 !important;
        }
        .error-message {
            color: #ef4444;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans flex items-center justify-center min-h-screen p-4">
    <button id="open-modal" class="bg-green-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-green-600 transition duration-200">Book Service</button>

    <!-- Location Selector -->
    <div id="location-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Select Location</h2>
        <hr class="border-gray-200 mb-6">
        <div id="location-taraba" data-location="Taraba State" class="location-option border-2 border-green-500 rounded-full py-3 px-6 text-gray-800 font-medium cursor-pointer hover:bg-gray-50 transition">Taraba State</div>
    </div>

    <!-- Service Selector -->
    <div id="service-screen" class="hidden fixed inset-0 bg-white md:max-w-3xl mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in overflow-y-auto z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-location" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select a Service</h1>
        <div class="space-y-4">
            <div id="service-lite" data-service="Lite Regular Cleaning" data-next="bedroom-screen" class="service-option flex items-center bg-white border-2 border-green-500 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <img src="https://placehold.co/50x50" alt="Lite Regular Cleaning" class="w-12 h-12 rounded-lg mr-4">
                <span class="text-gray-800 font-medium">Lite Regular Cleaning</span>
            </div>
            <div id="service-deep" data-service="Deep Cleaning" data-next="deepcleaning-screen" class="service-option flex items-center bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <img src="https://placehold.co/50x50" alt="Deep Cleaning" class="w-12 h-12 rounded-lg mr-4">
                <span class="text-gray-800 font-medium">Deep Cleaning</span>
            </div>
            <div id="service-rugs" data-service="Rugs and Carpet Cleaning" data-next="rugs-screen" class="service-option flex items-center bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <img src="https://placehold.co/50x50" alt="Rugs and Carpet Cleaning" class="w-12 h-12 rounded-lg mr-4">
                <span class="text-gray-800 font-medium">Rugs and Carpet Cleaning</span>
            </div>
            <div id="service-fumigation" data-service="Fumigation" data-next="fumigation-screen" class="service-option flex items-center bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <img src="https://placehold.co/50x50" alt="Fumigation" class="w-12 h-12 rounded-lg mr-4">
                <span class="text-gray-800 font-medium">Fumigation</span>
            </div>
        </div>
    </div>

    <!-- Bedroom List -->
    <div id="bedroom-screen" class="hidden fixed inset-0 bg-white md:max-w-3xl mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in overflow-y-auto z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-service" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select Bedroom Type</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div id="bedroom-1" data-bedroom="1 Bedroom Flat" data-price="9136.43" class="bedroom-option bg-white border-2 border-green-500 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">1 Bedroom Flat</h3>
                <p class="text-gray-600 text-sm flex-grow">Lite Regular cleaning. Duration up to 1hr 30mins.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶9,136.43</p>
            </div>
            <div id="bedroom-2" data-bedroom="2 Bedroom Flat" data-price="11286.43" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">2 Bedroom Flat</h3>
                <p class="text-gray-600 text-sm flex-grow">Lite Regular cleaning. Duration up to 2hrs 30mins.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶11,286.43</p>
            </div>
            <div id="bedroom-3" data-bedroom="3 Bedroom Flat" data-price="16661.43" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">3 Bedroom Flat</h3>
                <p class="text-gray-600 text-sm flex-grow">Lite Regular cleaning. Duration up to 3hrs 30mins.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶16,661.43</p>
            </div>
            <div id="bedroom-3-duplex" data-bedroom="3 Bedroom Duplex" data-price="17736.43" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">3 Bedroom Duplex</h3>
                <p class="text-gray-600 text-sm flex-grow">Lite Regular cleaning. Duration up to 3hrs 30mins.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶17,736.43</p>
            </div>
        </div>
    </div>

    <!-- Frequency Selector -->
    <div id="frequency-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-bedroom" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Choose Service Frequency</h1>
        <div class="space-y-4">
            <div id="freq-onetime" data-frequency="One-time Cleaning" class="frequency-option flex items-center bg-white border-2 border-green-500 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                    <img src="https://placehold.co/20x20" alt="Frequency Icon">
                </div>
                <span class="text-gray-800 font-medium">One-time Cleaning</span>
            </div>
            <div id="freq-twice" data-frequency="Twice Monthly Cleaning" class="frequency-option flex items-center bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                    <img src="https://placehold.co/20x20" alt="Frequency Icon">
                </div>
                <span class="text-gray-800 font-medium">Twice Monthly Cleaning</span>
            </div>
            <div id="freq-weekly" data-frequency="Weekly Cleaning" class="frequency-option flex items-center bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:shadow-md transition">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                    <img src="https://placehold.co/20x20" alt="Frequency Icon">
                </div>
                <span class="text-gray-800 font-medium">Weekly Cleaning</span>
            </div>
        </div>
    </div>

    <!-- Summary -->
    <div id="summary-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-frequency" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Summary</h1>
        <div id="summary-card" class="bg-white border border-gray-200 rounded-2xl p-6 mb-6 shadow-sm">
            <h3 id="summary-service" class="text-lg font-semibold text-gray-800 mb-2"></h3>
            <p id="summary-frequency" class="text-gray-600 text-sm mb-2"></p>
            <p id="summary-total" class="text-gray-800 font-semibold"></p>
        </div>
        <button id="next-to-date" class="w-full bg-green-500 text-white py-3 rounded-full font-medium hover:bg-green-600 transition shadow-md">Next Step</button>
    </div>

    <!-- Date & Time Picker -->
    <div id="datetime-screen" class="hidden fixed inset-0 bg-white md:max-w-lg mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-summary" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select Date & Time</h1>
        <div class="bg-white border border-gray-200 rounded-2xl p-6 mb-6 shadow-sm flex flex-col md:flex-row gap-4">
            <div class="flex-1">
                <label for="date-input" class="block text-sm font-medium text-gray-800 mb-2">Date</label>
                <input type="date" id="date-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <div id="date-error" class="error-message hidden">Please select a date</div>
            </div>
            <div class="flex-1">
                <label for="time-input" class="block text-sm font-medium text-gray-800 mb-2">Time</label>
                <input type="time" id="time-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                <div id="time-error" class="error-message hidden">Please select a time</div>
            </div>
        </div>
        <button id="next-to-login" class="w-full bg-green-500 text-white py-3 rounded-full font-medium hover:bg-green-600 transition shadow-md">Next Step</button>
    </div>

    <!-- Login -->
    <div id="login-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-datetime" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Login to Your Account</h1>
        <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-sm">
            <div class="space-y-4">
                <div>
                    <label for="login-email" class="block text-sm font-medium text-gray-800 mb-2">Email Address</label>
                    <input type="email" id="login-email" placeholder="Enter email address" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="login-email-error" class="error-message hidden">Please enter a valid email</div>
                </div>
                <div>
                    <label for="login-password" class="block text-sm font-medium text-gray-800 mb-2">Password</label>
                    <input type="password" id="login-password" placeholder="Enter password" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="login-password-error" class="error-message hidden">Please enter your password</div>
                </div>
                <button id="login-btn" class="w-full bg-green-500 text-white py-3 rounded-full font-medium hover:bg-green-600 transition shadow-md">Login</button>
            </div>
            <p class="text-center text-sm text-gray-600 mt-4">
                Don't have an account? <a href="#" id="to-signup" class="text-green-500 font-medium hover:underline">Create account</a>
            </p>
        </div>
    </div>

    <!-- Signup -->
    <div id="signup-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-login" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Create Account</h1>
        <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-sm">
            <div class="space-y-4">
                <div>
                    <label for="signup-name" class="block text-sm font-medium text-gray-800 mb-2">Full Name</label>
                    <input type="text" id="signup-name" placeholder="Enter full name" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="signup-name-error" class="error-message hidden">Please enter your full name</div>
                </div>
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="signup-email" class="block text-sm font-medium text-gray-800 mb-2">Email Address</label>
                        <input type="email" id="signup-email" placeholder="Enter email address" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <div id="signup-email-error" class="error-message hidden">Please enter a valid email</div>
                    </div>
                    <div class="flex-1">
                        <label for="signup-phone" class="block text-sm font-medium text-gray-800 mb-2">Phone Number</label>
                        <input type="tel" id="signup-phone" placeholder="Enter phone number" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        <div id="signup-phone-error" class="error-message hidden">Please enter your phone number</div>
                    </div>
                </div>
                <div>
                    <label for="signup-password" class="block text-sm font-medium text-gray-800 mb-2">Password</label>
                    <input type="password" id="signup-password" placeholder="Enter password" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="signup-password-error" class="error-message hidden">Please enter a password</div>
                </div>
                <div>
                    <label for="signup-address" class="block text-sm font-medium text-gray-800 mb-2">House Address</label>
                    <input type="text" id="signup-address" placeholder="No. 2 Mile-six road, Jalingo" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="signup-address-error" class="error-message hidden">Please enter your address</div>
                </div>
                <button id="signup-btn" class="w-full bg-green-500 text-white py-3 rounded-full font-medium hover:bg-green-600 transition shadow-md">Create Account</button>
            </div>
        </div>
    </div>

    <!-- Verification -->
    <div id="verify-screen" class="hidden fixed inset-0 bg-white md:max-w-md mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-signup" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Verify Order Details</h1>
        <div id="verify-card" class="bg-white border border-gray-200 rounded-2xl p-6 mb-6 shadow-sm">
            <h3 id="verify-service" class="text-lg font-semibold text-gray-800 mb-2"></h3>
            <p id="verify-frequency" class="text-gray-600 text-sm mb-2"></p>
            <div class="flex gap-2 mb-4">
                <span id="verify-date" class="bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm font-medium"></span>
                <span id="verify-time" class="bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm font-medium"></span>
            </div>
            <p id="verify-name" class="text-gray-600 text-sm mb-2"></p>
            <p id="verify-email" class="text-gray-600 text-sm mb-2"></p>
            <p id="verify-total" class="text-gray-800 font-semibold"></p>
        </div>
        <button id="proceed-payment" class="w-full bg-green-500 text-white py-3 rounded-full font-medium hover:bg-green-600 transition shadow-md">Proceed to Payment</button>
    </div>

    <!-- Additional Service Sections -->
    <div id="deepcleaning-screen" class="hidden fixed inset-0 bg-white md:max-w-3xl mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in overflow-y-auto z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-service-deep" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select Deep Cleaning</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div id="deep-flat" data-bedroom="Deep Cleaning Flat" data-price="81162.50" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Deep Cleaning Flat</h3>
                <p class="text-gray-600 text-sm flex-grow">Includes project manager, machinery, chemicals, products, logistics & professionals.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶81,162.50</p>
            </div>
            <div id="deep-duplex" data-bedroom="Deep Cleaning Duplex" data-price="98792.50" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Deep Cleaning Duplex</h3>
                <p class="text-gray-600 text-sm flex-grow">Includes project manager, machinery, chemicals, products, logistics & professionals.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶98,792.50</p>
            </div>
        </div>
    </div>

    <div id="rugs-screen" class="hidden fixed inset-0 bg-white md:max-w-3xl mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in overflow-y-auto z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-service-rugs" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select Rug Size</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div id="rug-small" data-bedroom="Small rugs" data-price="25650" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Small rugs</h3>
                <p class="text-gray-600 text-sm flex-grow">30 sq. ft. Covers washing, sucking out moisture, and drying.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶25,650</p>
            </div>
            <div id="rug-medium" data-bedroom="Medium rugs" data-price="33750" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">Medium rugs</h3>
                <p class="text-gray-600 text-sm flex-grow">75 sq. ft. Covers washing, sucking out moisture, and drying.</p>
                <p class="text-green-500 font-semibold mt-4">‚Ç¶33,750</p>
            </div>
        </div>
    </div>

    <div id="fumigation-screen" class="hidden fixed inset-0 bg-white md:max-w-3xl mx-auto my-4 rounded-xl shadow-2xl p-6 animate-slide-in overflow-y-auto z-50">
        <button class="close-modal absolute top-4 right-4 text-gray-600 hover:text-gray-800 text-xl">√ó</button>
        <a href="#" id="back-to-service-fumigation" class="flex items-center text-gray-800 font-medium mb-6 hover:text-green-500 transition">
            <span class="mr-2 text-xl">‚Üê</span> Back
        </a>
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Select Fumigation</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div id="fumigation-1" data-bedroom="One Bedroom" data-price="60750" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex justify-between">
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-1">One Bedroom</h3>
                    <p class="text-gray-600 text-sm">Up to One hour</p>
                </div>
                <p class="text-green-500 font-semibold">‚Ç¶60,750</p>
            </div>
            <div id="fumigation-2" data-bedroom="Two Bedroom" data-price="67500" class="bedroom-option bg-white border border-gray-200 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition flex justify-between">
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-1">Two Bedroom</h3>
                    <p class="text-gray-600 text-sm">Up to One hour</p>
                </div>
                <p class="text-green-500 font-semibold">‚Ç¶67,500</p>
            </div>
        </div>
    </div>

    <script>
        function openModal(){
class BookingManager {
    constructor() {
        this.screens = [
            'location-screen', 'service-screen', 'bedroom-screen', 'frequency-screen',
            'summary-screen', 'datetime-screen', 'login-screen', 'signup-screen',
            'verify-screen', 'deepcleaning-screen', 'rugs-screen', 'fumigation-screen'
        ];
        this.currentScreen = null;
        this.state = {
            location: null,
            service: null,
            bedroom: null,
            price: null,
            frequency: null,
            date: null,
            time: null,
            name: null,
            email: null,
            phone: null,
            address: null,
            hasAccount: false
        };
        this.history = [];
        this.init();
    }

    init() {
        // Event listeners for opening modal
        document.getElementById('open-modal').addEventListener('click', () => this.showScreen('location-screen'));

        // Close buttons for all modals
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => this.closeAll());
        });

        // Back buttons
        document.getElementById('back-to-location').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('service-screen', 'location-screen');
        });
        document.getElementById('back-to-service').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('bedroom-screen', 'service-screen');
        });
        document.getElementById('back-to-bedroom').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('frequency-screen', 'bedroom-screen');
        });
        document.getElementById('back-to-frequency').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('summary-screen', 'frequency-screen');
        });
        document.getElementById('back-to-summary').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('datetime-screen', 'summary-screen');
        });
        document.getElementById('back-to-datetime').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('login-screen', 'datetime-screen');
        });
        document.getElementById('back-to-login').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('signup-screen', 'login-screen');
        });
        document.getElementById('back-to-signup').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('verify-screen', 'signup-screen');
        });
        document.getElementById('back-to-service-deep').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('deepcleaning-screen', 'service-screen');
        });
        document.getElementById('back-to-service-rugs').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('rugs-screen', 'service-screen');
        });
        document.getElementById('back-to-service-fumigation').addEventListener('click', (e) => { 
            e.preventDefault(); 
            this.goBackTo('fumigation-screen', 'service-screen');
        });

        // Location selection
        document.querySelectorAll('.location-option').forEach(option => {
            option.addEventListener('click', () => {
                this.state.location = option.dataset.location;
                this.showScreen('service-screen');
            });
        });

        // Service selection
        document.querySelectorAll('.service-option').forEach(option => {
            option.addEventListener('click', () => {
                this.state.service = option.dataset.service;
                this.showScreen(option.dataset.next);
            });
        });

        // Bedroom/Option selection
        document.querySelectorAll('.bedroom-option').forEach(option => {
            option.addEventListener('click', () => {
                this.state.bedroom = option.dataset.bedroom;
                this.state.price = parseFloat(option.dataset.price);
                this.showScreen('frequency-screen');
            });
        });

        // Frequency selection
        document.querySelectorAll('.frequency-option').forEach(option => {
            option.addEventListener('click', () => {
                this.state.frequency = option.dataset.frequency;
                this.updateSummary();
                this.showScreen('summary-screen');
            });
        });

        // Summary to Date & Time
        document.getElementById('next-to-date').addEventListener('click', () => {
            this.showScreen('datetime-screen');
        });

        // Date & Time validation and next step
        document.getElementById('next-to-login').addEventListener('click', () => {
            const dateInput = document.getElementById('date-input');
            const timeInput = document.getElementById('time-input');
            let isValid = true;

            // Validate date
            if (!dateInput.value) {
                dateInput.classList.add('input-error');
                document.getElementById('date-error').classList.remove('hidden');
                isValid = false;
            } else {
                dateInput.classList.remove('input-error');
                document.getElementById('date-error').classList.add('hidden');
            }

            // Validate time
            if (!timeInput.value) {
                timeInput.classList.add('input-error');
                document.getElementById('time-error').classList.remove('hidden');
                isValid = false;
            } else {
                timeInput.classList.remove('input-error');
                document.getElementById('time-error').classList.add('hidden');
            }

            if (isValid) {
                this.state.date = dateInput.value;
                this.state.time = timeInput.value;
                
                // Check if user has an account
                if (this.state.hasAccount) {
                    this.showScreen('login-screen');
                } else {
                    this.showScreen('signup-screen');
                }
            }
        });

        // Login form handling
        document.getElementById('login-btn').addEventListener('click', () => {
            const email = document.getElementById('login-email');
            const password = document.getElementById('login-password');
            let isValid = true;

            // Validate email
            if (!email.value || !this.validateEmail(email.value)) {
                email.classList.add('input-error');
                document.getElementById('login-email-error').classList.remove('hidden');
                isValid = false;
            } else {
                email.classList.remove('input-error');
                document.getElementById('login-email-error').classList.add('hidden');
            }

            // Validate password
            if (!password.value) {
                password.classList.add('input-error');
                document.getElementById('login-password-error').classList.remove('hidden');
                isValid = false;
            } else {
                password.classList.remove('input-error');
                document.getElementById('login-password-error').classList.add('hidden');
            }

            if (isValid) {
                this.state.email = email.value;
                this.state.hasAccount = true;
                this.updateVerification();
                this.showScreen('verify-screen');
            }
        });

        // Switch to signup
        document.getElementById('to-signup').addEventListener('click', (e) => {
            e.preventDefault();
            this.showScreen('signup-screen');
        });

        // Signup form handling
        document.getElementById('signup-btn').addEventListener('click', () => {
            const name = document.getElementById('signup-name');
            const email = document.getElementById('signup-email');
            const phone = document.getElementById('signup-phone');
            const password = document.getElementById('signup-password');
            const address = document.getElementById('signup-address');
            let isValid = true;

            // Validate name
            if (!name.value) {
                name.classList.add('input-error');
                document.getElementById('signup-name-error').classList.remove('hidden');
                isValid = false;
            } else {
                name.classList.remove('input-error');
                document.getElementById('signup-name-error').classList.add('hidden');
            }

            // Validate email
            if (!email.value || !this.validateEmail(email.value)) {
                email.classList.add('input-error');
                document.getElementById('signup-email-error').classList.remove('hidden');
                isValid = false;
            } else {
                email.classList.remove('input-error');
                document.getElementById('signup-email-error').classList.add('hidden');
            }

            // Validate phone
            if (!phone.value) {
                phone.classList.add('input-error');
                document.getElementById('signup-phone-error').classList.remove('hidden');
                isValid = false;
            } else {
                phone.classList.remove('input-error');
                document.getElementById('signup-phone-error').classList.add('hidden');
            }

            // Validate password
            if (!password.value) {
                password.classList.add('input-error');
                document.getElementById('signup-password-error').classList.remove('hidden');
                isValid = false;
            } else {
                password.classList.remove('input-error');
                document.getElementById('signup-password-error').classList.add('hidden');
            }

            // Validate address
            if (!address.value) {
                address.classList.add('input-error');
                document.getElementById('signup-address-error').classList.remove('hidden');
                isValid = false;
            } else {
                address.classList.remove('input-error');
                document.getElementById('signup-address-error').classList.add('hidden');
            }

            if (isValid) {
                this.state.name = name.value;
                this.state.email = email.value;
                this.state.phone = phone.value;
                this.state.address = address.value;
                this.state.hasAccount = true;
                this.updateVerification();
                this.showScreen('verify-screen');
            }
        });

        // Payment
        document.getElementById('proceed-payment').addEventListener('click', () => {
            alert('Proceeding to payment with: ' + JSON.stringify(this.state, null, 2));
        });
    }

    validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }

    updateSummary() {
        document.getElementById('summary-service').textContent = `${this.state.bedroom} - ${this.state.service}`;
        document.getElementById('summary-frequency').textContent = `Frequency: ${this.state.frequency}`;
        document.getElementById('summary-total').textContent = `Total: ‚Ç¶${this.state.price.toLocaleString('en-NG', { minimumFractionDigits: 2 })}`;
    }

    updateVerification() {
        document.getElementById('verify-service').textContent = `${this.state.bedroom} - ${this.state.service}`;
        document.getElementById('verify-frequency').textContent = `Frequency: ${this.state.frequency}`;
        document.getElementById('verify-date').textContent = `üìÖ ${this.state.date ? new Date(this.state.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) : 'Not selected'}`;
        document.getElementById('verify-time').textContent = `üïò ${this.state.time || 'Not selected'}`;
        document.getElementById('verify-name').textContent = `Customer's Name: ${this.state.name || 'Not provided'}`;
        document.getElementById('verify-email').textContent = `Email Address: ${this.state.email || 'Not provided'}`;
        document.getElementById('verify-total').textContent = `Total Price: ‚Ç¶${this.state.price.toLocaleString('en-NG', { minimumFractionDigits: 2 })}`;
    }

    showScreen(screenId) {
        if (this.currentScreen) {
            const current = document.getElementById(this.currentScreen);
            current.classList.add('animate-slide-out');
            setTimeout(() => {
                current.classList.add('hidden');
                current.classList.remove('animate-slide-out');
                this.displayScreen(screenId);
            }, 300);
        } else {
            this.displayScreen(screenId);
        }
        
        // Only add to history if it's not already the current screen
        if (this.history[this.history.length - 1] !== screenId) {
            this.history.push(screenId);
        }
    }

    displayScreen(screenId) {
        this.screens.forEach(id => {
            const element = document.getElementById(id);
            element.classList.toggle('hidden', id !== screenId);
            if (id === screenId) {
                element.classList.add('animate-slide-in');
                this.currentScreen = screenId;
            }
        });
    }

    goBackTo(fromScreen, toScreen) {
        // Find the index of the screen we're coming from
        const fromIndex = this.history.lastIndexOf(fromScreen);
        
        // Find the index of the screen we want to go back to
        const toIndex = this.history.lastIndexOf(toScreen);
        
        if (fromIndex !== -1 && toIndex !== -1 && toIndex < fromIndex) {
            // Slice the history to remove screens after the target
            this.history = this.history.slice(0, toIndex + 1);
            this.showScreen(toScreen);
        } else {
            // Fallback to default behavior
            this.history.pop();
            const previousScreen = this.history[this.history.length - 1] || 'location-screen';
            this.showScreen(previousScreen);
        }
    }

    closeAll() {
        this.screens.forEach(id => {
            document.getElementById(id).classList.add('hidden');
        });
        this.currentScreen = null;
        this.history = [];
        this.state = {
            location: null,
            service: null,
            bedroom: null,
            price: null,
            frequency: null,
            date: null,
            time: null,
            name: null,
            email: null,
            phone: null,
            address: null,
            hasAccount: false
        };
    }
}

// Initialize the booking manager
const booking = new BookingManager();
}
    </script>
</body>
</html>